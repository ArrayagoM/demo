<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Get a Quote</title>
    <link rel="stylesheet" href="/css/maskgroup.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <!-- üîÅ MOVIDO ARRIBA -->
  </head>
  <body>
    <section class="maskgroup">
      <form class="mask-container" id="quoteForm">
        <div class="field">
          <label>Name</label>
          <input type="text" placeholder="Name" name="name" required />
        </div>
        <div class="field">
          <label>Business email</label>
          <input type="email" placeholder="Business email" name="email" required />
        </div>
        <div class="field">
          <label>What kind of tech services are you looking for?</label>
          <select style="color: rgba(15, 108, 216, 1)" name="service" required>
            <option value="Mobile App Development">Mobile App Development</option>
            <option value="Web Development">Web Development</option>
            <option value="UX/UI Design">UX/UI Design</option>
          </select>
        </div>
        <div class="field">
          <label>Which option best reflects your project‚Äôs current stage?</label>
          <select style="color: rgba(15, 108, 216, 1)" name="stage" required>
            <option value="Starting fresh">Starting fresh: no existing framework or design</option>
            <option value="Have designs">Have designs, need dev</option>
            <option value="Maintenance">Existing app, need maintenance</option>
          </select>
        </div>
        <div class="field">
          <label>Message</label>
          <textarea
            name="message"
            placeholder="Please specify your needs in a few words‚Ä¶"
            required
          ></textarea>
        </div>
        <button type="submit" class="cta">Send My Quote Today!</button>
      </form>
    </section>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const form = document.getElementById('quoteForm');
        const submitBtn = form.querySelector('button[type="submit"]');

        form.addEventListener('submit', async (e) => {
          e.preventDefault(); // evita recarga

          const formData = {
            name: form.name.value.trim(),
            email: form.email.value.trim(),
            service: form.service.value,
            stage: form.stage.value,
            message: form.message.value.trim(),
          };

          if (!formData.name || !formData.email || !formData.message) {
            Toastify({
              text: 'Please fill out all required fields.',
              duration: 4000,
              gravity: 'top',
              position: 'right',
              backgroundColor: '#cd314e',
            }).showToast();
            return;
          }

          submitBtn.classList.add('loading');

          try {
            const response = await fetch('https://tu-servidor.com/api/send-quote', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify(formData),
            });

            if (response.ok) {
              Toastify({
                text: '‚úÖ Your quote was sent successfully!',
                duration: 4000,
                gravity: 'top',
                position: 'right',
                backgroundColor: '#2e9e60',
              }).showToast();
              form.reset();
            } else {
              Toastify({
                text: '‚ö†Ô∏è Something went wrong. Please try again.',
                duration: 4000,
                gravity: 'top',
                position: 'right',
                backgroundColor: '#f9893b',
              }).showToast();
            }
          } catch (err) {
            console.error('Error sending quote:', err);
            Toastify({
              text: 'üö® Error connecting to the server.',
              duration: 4000,
              gravity: 'top',
              position: 'right',
              backgroundColor: '#cd314e',
            }).showToast();
          } finally {
            submitBtn.classList.remove('loading');
          }
        });
      });
    </script>
  </body>
</html>
